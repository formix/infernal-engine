<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Infernal Engine</h1><p><a href="https://gitter.im/formix/infernal-engine?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/formix/infernal-engine.svg" alt="Join the chat at https://gitter.im/formix/infernal-engine"></a>
<a href="https://travis-ci.org/formix/infernal-engine"><img src="https://travis-ci.org/formix/infernal-engine.svg?branch=master" alt="Build Status"></a></p>
<p>This is the first open source JavaScript inference engine implementation
around. The engine is developed using NodeJS. An inference engine is a tool
to build <a href="http://en.wikipedia.org/wiki/Expert_system">expert systems</a>. Expert
systems are used for many artificial intelligence implementations based on
knowledge. Video games use it to script opponents character AI and industries
use the concept to configure complex manufacturing products.</p>
<p><a href="http://infernal-engine.formix.org/InfernalEngine.html">InfernalEngine class Reference</a></p>
<h1>Usage</h1><h2>Using The Engine</h2><pre class="prettyprint source lang-javascript"><code>var InfernalEngine = require(&quot;infernal-engine&quot;);
var engine = new InfernalEngine();

// Adds a rule named &quot;increment&quot; to increment the value of 'i' up to 5.
engine.addRule(&quot;increment&quot;, function(done) {
    var i = this.get(&quot;i&quot;);
    if (i &lt; 5) {
        i++;
    } else if (i > 5) {
        done(new Error(&quot;'i' must be lower or equal to 5.&quot;));
        return;
    }
    this.set(&quot;i&quot;, i);
    done();
});

// Set a value to the fact &quot;i&quot;
engine.set(&quot;i&quot;, 1);

// launches inference
engine.infer(function(err) {
    if (err) {
        console.log(err);
        return;
    }

    // will print &quot;5&quot;
    console.log(engine.get(&quot;i&quot;));
});</code></pre><h2>Defining a Model</h2><p>A model is a way to define rules and facts using a simple Javascript object.
Usually, a model is defined in its own Node module. Alternatively, a single
module could export a set of related models in the same export.</p>
<pre class="prettyprint source lang-javascript"><code>// module character.js

module.exports = {
    playerName: &quot;&quot;,
    name: &quot;&quot;,

    race: {
        selected: &quot;human&quot;,
        options: [&quot;human&quot;, &quot;elf&quot;, &quot;dwarf&quot;, &quot;halfling&quot;, &quot;gnome&quot;],
        valid: true;

        validate: validateSelection
    },

    class: {
        selected: &quot;wizard&quot;,
        options: [&quot;fighter&quot;, &quot;wizard&quot;, &quot;cleric&quot;, &quot;rogue&quot;],
        valid: true,

        validate: validateSelection,

        updateOptions: function(done) {
            // update available classes based on AD&D 1st and 2nd edition
            var race = this.get(&quot;../race/selected&quot;);
            var options = [];
            if (race === &quot;dwarf&quot; || race === &quot;halfling&quot;) {
                options = [&quot;fighter&quot;, &quot;rogue&quot;];
            } else if (race === &quot;elf&quot; || race === &quot;gnome&quot;) {
                options = [&quot;fighter&quot;, &quot;rogue&quot;, &quot;wizard&quot;];
            } else if (race === &quot;human&quot;) {
                options: [&quot;fighter&quot;, &quot;wizard&quot;, &quot;cleric&quot;, &quot;rogue&quot;],
            }
            this.set(&quot;options&quot;, options);
            done();
        }
    }
};


function validateSelection(done) {
    var selected = this.get(&quot;selected&quot;);
    var options = this.get(&quot;options&quot;);
    var index = options.indexOf(selected);
    var valid = (index > -1);
    this.set(&quot;valid&quot;, valid);
    done();
}</code></pre><p>The previous example will insure that the selected option is valid for both
race and class. This is done using the same function reference 
<code>validateSelection</code> as the validation rule.</p>
<p>With the <em>Infernal Engine</em> You can reuse predefined functions
anywhere in your model as long as the model's fact structure supports that rule
reference requirements. Each rule is executed in its own context, even if the
same reference is used.</p>
<p>Changing the <code>race</code> value for &quot;halfling&quot; will in turn:</p>
<ol>
<li>launch the rule &quot;/race/validate&quot;</li>
<li>set the fact &quot;/race/valid&quot; to true</li>
<li>launch the rule &quot;/class/updateOptions&quot;</li>
<li>change the fact &quot;/class/options&quot; to [&quot;fighter&quot;, &quot;rogue&quot;]</li>
<li>launch the rule &quot;/class/validate&quot;</li>
<li>set the fact &quot;/class/valid&quot; to false</li>
</ol>
<p>So changin the race from &quot;human&quot; to &quot;halfling&quot; while keeping the class 
&quot;wizard&quot; puts the character class in an invalid state since an halfling cannot
be a wizard!</p>
<h2>Calling <code>done</code> Within a Rule</h2><p>You must call the <code>done</code> callback to tell the inference engine that the current
rule finished executing. Otherwise, the engine will wait idle until timeout. You
can call the <code>done</code> callback with a single error parameter. This will stop the
inference and call the <code>infer</code> callback with the error parameter you have set.</p>
<h2>Absolute Fact Reference</h2><p>Absolute fact reference involves using a fact full name, including the 
leading &quot;/&quot;. As a convention, a fact can be contextualized using a directory
like notation. For example: <code>/character/race</code> implies that the &quot;race&quot; fact is
within the &quot;character&quot; context starting at the root context. The context can 
be of any dept and thus form a complex hierarchy of facts.</p>
<h2>Relative Fact Reference</h2><p>Relative fact reference involves using a fact partial name within the current 
rule context. To refer to a relative fact, use the fact context without the 
leading &quot;/&quot; in the fact name. For eaxmple a rule named 
<code>/hoist/engine/checkPhaseCount</code> is within the base context 
<code>/hoist/engine/</code>. Accessing any fact without a leading &quot;/&quot;, will 
prepend the current rule context to the referenced fact. </p>
<p>It is also possible to move up in the current context using &quot;..&quot;. For example,
given the rule <code>/hoist/motor/checkPhaseCount</code> accessing the fact 
<code>../liftCapacity</code> within <code>checkPhaseCount</code> will access <code>/hoist/liftCapacity</code>.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Agenda.html">Agenda</a></li><li><a href="EngineProxy.html">EngineProxy</a></li><li><a href="InfernalEngine.html">InfernalEngine</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Apr 25 2016 11:23:37 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>